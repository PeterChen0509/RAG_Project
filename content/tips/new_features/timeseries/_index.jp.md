---
title: "時系列予測"
date: 2018-12-29T11:02:05+06:00
lastmod: 2023-06-13T10:42:26+06:00
weight: 7
draft: false
# metaタグのパラメータ
meta:
  description: ""
# クラウド・デスクトップ限定ページの場合は片方のみtrueにする
visible:
  is_cloud_only: false
  is_desktop_only: false
# 検索でヒットする文字列の指定
keywords:
  [
    "時系列予測",
    "時系列モード",
    "自動生成",
    "予測期間",
    "未来",
    "将来",
    "時間",
    "経過",
    "予測と実績グラフ",
  ]
---

{{% div_slide "はじめに" normal first-page %}}

Prediction One では、時系列予測を簡単に行う機能があります。
需要予測、売上予測、来店数予測や入電数予測など、数多くの場面で利用できます。本資料では、時系列予測についてご説明します。

![](img/t_slide2.png)

時系列予測のチュートリアルもありますので、具体例としてご参照ください。{{% desktop_only %}}：`C:/Program Files/Sony/Prediction One/ja-JP/doc/sample_dataset/use_case`{{% /desktop_only %}}

- {{% a_in "../../../tutorial/forecast_sell/" "製造管理_販売台数予測による製造計画の改善" %}}
- {{% a_in "../../../tutorial/forecast_demand/" "生産管理_出荷数予測による生産計画の精度向上" %}}
- {{% a_in "../../../tutorial/forecast_the_number_of_visitors/" "店舗管理_来店数予測による仕入れ量決定" %}}

{{% /div_slide %}}

{{% div_slide "時系列予測とは" normal %}}
時系列予測とは、時間に対する値の系列（時系列）について、将来の値を予測することです。以下の例が挙げられます。

![](img/t_slide3.png)
{{% /div_slide %}}

{{% div_slide "データの準備" normal %}}
時系列予測には、過去の実績についての時系列データを記載したファイルが必要です。<br/>
前のページの出荷数の例の場合、データの csv ファイルは以下のようになります。<br/>

![](img/t_slide4.png)

時間に対して情報を追加するケースについては、後ほど説明します。
{{% /div_slide %}}

{{% div_slide "学習と予測" normal %}}
時系列予測では、学習と予測という２つのステップがあります。以下は出荷数データから出荷数予測を行う例です。

![](img/t_slide5.png)
{{% /div_slide %}}

{{% div_slide "学習：時系列予測の実行方法" normal %}}
Prediction One で時系列予測を行う方法について説明します。「モデル設定」の画面（データ読み込み後の画面）で、以下の手順を順番に行ってください。

![](img/t_slide18.png)

![](img/t_slide19.png)

{{% /div_slide %}}

{{% div_slide "学習：時系列予測の設定" normal %}}
「時系列予測の設定」の画面では、予測したい期間を指定してください。この設定に合わせて予測モデルを作成します。
予測モデル作成後、予測精度の評価を行います。

![](img/t_slide7.png)
![](img/t_slide22.png)
![](img/t_slide24.png)
{{% cloud_only %}}
![](img/t_slide25.png)

上振れ下振れ予測を有効にした場合については「{{% a_in "../prediction_interval/" "上振れ下振れ予測"%}}」で詳細に説明しています。あわせてご参照ください。本資料では上振れ下振れ予測を無効にした、通常の時系列予測モードを使用した場合についての説明になります。
{{% /cloud_only %}}
次から予測精度評価について説明します。

{{% /div_slide %}}

{{% div_slide "予測精度評価：精度評価の基本的な考え方" normal %}}
時系列予測では次のように予測精度を評価します

1. 評価期間を設定
2. 評価期間より前の時系列から、評価期間の値を予測（評価期間の値は使わずに）
3. 評価期間で、予測値と実際の値を比較

![](img/t_slide8.png)
{{% /div_slide %}}

{{% div_slide "予測精度評価：複数の期間での精度評価" normal %}}
Prediction One では、精度評価期間を複数設定し、それぞれの設定で予測を行い、実際の値と予測値の比較を行います。

![](img/t_slide9.png)

評価期間を複数用意することで、実際の値と予測値のペアを多数得ることができ、統計的に安定して精度評価ができます。 実際の値と予測値を比較集計することで、精度評価値算出やグラフ作成を行います。
{{% /div_slide %}}

{{% div_slide "予測精度評価：精度評価値の計算とポイント" normal %}}
時系列予測では、予測対象の時期が先であればあるほど予測精度は下がっていきます。
たとえば、1 カ月先の出荷数予測と 3 カ月先の出荷数予測では、3 カ月先の出荷数予測の方が先の未来の予測になるので、予測はより難しいです。
Prediction One では、予測対象の時期ごとに予測精度を算出します。以下、出荷数予測の例で説明します。

![](img/t_slide10.png)

上の図のように集計すると、１カ月先予測をした場合の予測精度、２カ月先予測をした場合の予測精度、３カ月先予測をした場合の予測精度をそれぞれ計算できます。
Prediction One では、各ケースの予測精度を誤差中央値、誤差率中央値で算出します。
さらに、各ケースに対してグラフを作成し、予測の様子を見えるようにしています。

<hr/>

![](img/t_slide11.png)

Prediction One では「どれくらい先の予測か」によって、予測精度（誤差率中央値と誤差率）を分けて表示します。<br/>
出荷数予測の例では、１カ月先予測、２カ月先予測、３カ月先予測のそれぞれのケースについて予測精度を表示します。

<hr/>

![](img/t_slide12.png)

各ケース（１カ月先予測をした場合、２カ月先予測をした場合、３カ月先予測をした場合）の予測値と実際の値をプロットしたグラフも表示します。どれくらい先を予測すると、どれくらいの予測精度になるか直感的に掴むことができます。
{{% /div_slide %}}

{{% div_slide "予測寄与度を確認する" normal %}}
時系列予測では、数値予測の時と同じように予測寄与度を確認できます。
「寄与度」ではそれぞれの項目の値が予測を増やす方・減らす方へどのように影響しているかを確認することができます。
寄与度の詳細の見方は「{{% a_in "../../result/contribution/" "予測寄与度の概要" %}}」のページもご確認ください。

![](img/t_slide23.png)

時系列モードでは予測モデル作成時に「過去の予測したい項目の値」という項目が自動的に追加されます。
これは、人間が将来の予測を行う際に過去の実績を参考にするように、過去の予測したい項目の値を元に作成した項目です。
「過去の予測したい項目の値」は予測するタイミングの前日・7 日前・14 日前・数カ月前・1 年前などさまざまな時点の値を組合わせて作成されます。
そのため、「過去の予測したい項目の値」に関する詳細な寄与度を表示することはできません。

{{% /div_slide %}}

{{% div_slide "時間に対して付加的な情報があるケース" normal %}}
Prediction One では、時間に対して付加的な情報がある場合、それを加味した予測を行うことができます。
この場合付加的な情報を時系列データに項目として追加します。

詳細は{{% a_in "../timeseries_features/" "予測したい項目以外の項目" %}}のページをご確認ください。

{{% /div_slide %}}

{{% div_slide "上振れ下振れ予測" normal %}}
時系列予測モードでは上振れ下振れ予測を行うこともできます。上振れ下振れ予測とは、未来の各時刻に対する1 つの予測値に加えて、その値がどの程度増減し得るのかを示す上振れ・下振れ予測値も出力します。

詳細は{{% a_in "../prediction_interval/" "上振れ下振れ予測" %}}のページをご確認ください。
{{% /div_slide %}}

{{% div_slide "予測可能期間について" normal %}}
時系列予測では、学習データのもっとも新しい時間と、設定した予測期間に基づき、予測可能期間が決まります。
予測可能期間内に対してしか予測は実行できません。

出荷数予測のケースでは、予測可能期間は、「2019/12/1」の「１か月先」から「３カ月先」までなので（このように設定したとします）、
2020/1/1 から 2020/3/1 までになります。つまり、2020/1、2020/2、2020/3 の３カ月分が予測できることになります。

![](img/t_slide16.png)
{{% /div_slide %}}

{{% div_slide "通常の数値予測と時系列予測モードの違い" normal %}}
時系列予測モードを使用すると、過去の出荷数や時間情報（季節・曜日・午前や午後などの時間からわかる情報）を利用した予測をするようになります。
データを時間に沿って並べてみたとき、予測したい項目の並びに時間的な関係がある場合、時系列予測モードをご利用ください。

![](img/t_slide17.png)
{{% /div_slide %}}

{{% div_slide "まとめ" summary %}}
時系列予測は、ビジネスの多くの場面で利用できます。
需要、売上、来店数や入電数などをデータに基づいて高い精度で客観的に予測できます。現状これらの予測は経験と勘で行われることが多いと思いますが、予測分析を導入することで、予測精度を上げ、予測コストを下ることが可能になります。<br/>

一方、時系列予測は高度な分析技術が必要になります。上昇トレンド、下降トレンド、周期的な動きなどの考慮などが必要です。
Prediction One では、これらを考慮した時系列予測を簡単に実行できます。<br/>

本資料を参考に、ぜひ時系列予測をビジネスでご活用ください。{{% /div_slide %}}
